# ğŸ—ï¸ SchÃ©ma de l'Architecture - Smart Stock

## Architecture GÃ©nÃ©rale

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        COUCHE PRÃ‰SENTATION                       â”‚
â”‚                         (Frontend)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   Pages Web  â”‚  â”‚   CSS/JS      â”‚  â”‚  BibliothÃ¨quesâ”‚        â”‚
â”‚  â”‚              â”‚  â”‚               â”‚  â”‚               â”‚        â”‚
â”‚  â”‚ â€¢ index.php  â”‚  â”‚ â€¢ styles_     â”‚  â”‚ â€¢ Chart.js    â”‚        â”‚
â”‚  â”‚ â€¢ stock.php  â”‚  â”‚   connected.  â”‚  â”‚ â€¢ FPDF        â”‚        â”‚
â”‚  â”‚ â€¢ ventes.php â”‚  â”‚   css         â”‚  â”‚               â”‚        â”‚
â”‚  â”‚ â€¢ clients.phpâ”‚  â”‚ â€¢ JavaScript  â”‚  â”‚               â”‚        â”‚
â”‚  â”‚ â€¢ ...        â”‚  â”‚               â”‚  â”‚               â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ RequÃªtes HTTP
                              â”‚ Sessions PHP
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        COUCHE LOGIQUE                           â”‚
â”‚                         (Backend PHP)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Pages PHP (ContrÃ´leurs)                      â”‚  â”‚
â”‚  â”‚  â€¢ Authentification (auth.php)                            â”‚  â”‚
â”‚  â”‚  â€¢ Gestion Stock (stock.php)                              â”‚  â”‚
â”‚  â”‚  â€¢ Gestion Ventes (ventes.php)                            â”‚  â”‚
â”‚  â”‚  â€¢ Gestion Clients (clients.php)                          â”‚  â”‚
â”‚  â”‚  â€¢ Gestion Fournisseurs (fournisseurs.php)                â”‚  â”‚
â”‚  â”‚  â€¢ Dashboard (index.php)                                 â”‚  â”‚
â”‚  â”‚  â€¢ ...                                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                   â”‚
â”‚                              â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Helpers (Fonctions RÃ©utilisables)           â”‚  â”‚
â”‚  â”‚  â€¢ db_conn.php (Connexion BDD)                           â”‚  â”‚
â”‚  â”‚  â€¢ historique_helper.php (Logging)                       â”‚  â”‚
â”‚  â”‚  â€¢ export_helper.php (Export CSV)                        â”‚  â”‚
â”‚  â”‚  â€¢ role_helper.php (Gestion rÃ´les)                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                   â”‚
â”‚                              â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              SÃ©curitÃ©                                     â”‚  â”‚
â”‚  â”‚  â€¢ Prepared Statements (Protection SQL Injection)        â”‚  â”‚
â”‚  â”‚  â€¢ password_hash/verify (Hachage mots de passe)          â”‚  â”‚
â”‚  â”‚  â€¢ htmlspecialchars (Protection XSS)                     â”‚  â”‚
â”‚  â”‚  â€¢ Sessions PHP (Authentification)                      â”‚  â”‚
â”‚  â”‚  â€¢ ContrÃ´le d'accÃ¨s basÃ© sur les rÃ´les                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ RequÃªtes SQL
                              â”‚ (MySQLi)
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        COUCHE DONNÃ‰ES                           â”‚
â”‚                      (Base de DonnÃ©es MySQL)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Utilisateurs â”‚  â”‚  Produits     â”‚  â”‚   Clients    â”‚        â”‚
â”‚  â”‚              â”‚  â”‚               â”‚  â”‚              â”‚        â”‚
â”‚  â”‚ â€¢ id         â”‚  â”‚ â€¢ id          â”‚  â”‚ â€¢ id          â”‚        â”‚
â”‚  â”‚ â€¢ nom        â”‚  â”‚ â€¢ nom         â”‚  â”‚ â€¢ nom         â”‚        â”‚
â”‚  â”‚ â€¢ email      â”‚  â”‚ â€¢ catÃ©gorie   â”‚  â”‚ â€¢ tÃ©lÃ©phone   â”‚        â”‚
â”‚  â”‚ â€¢ rÃ´le       â”‚  â”‚ â€¢ prix        â”‚  â”‚ â€¢ email       â”‚        â”‚
â”‚  â”‚ â€¢ mdp        â”‚  â”‚ â€¢ stock       â”‚  â”‚ â€¢ adresse     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Fournisseurs â”‚  â”‚   Ventes      â”‚  â”‚   Achats     â”‚        â”‚
â”‚  â”‚              â”‚  â”‚               â”‚  â”‚              â”‚        â”‚
â”‚  â”‚ â€¢ id         â”‚  â”‚ â€¢ id          â”‚  â”‚ â€¢ id          â”‚        â”‚
â”‚  â”‚ â€¢ nom        â”‚  â”‚ â€¢ date        â”‚  â”‚ â€¢ date        â”‚        â”‚
â”‚  â”‚ â€¢ tÃ©lÃ©phone  â”‚  â”‚ â€¢ total       â”‚  â”‚ â€¢ total       â”‚        â”‚
â”‚  â”‚ â€¢ email      â”‚  â”‚ â€¢ client_id   â”‚  â”‚ â€¢ fournisseurâ”‚        â”‚
â”‚  â”‚ â€¢ adresse    â”‚  â”‚               â”‚  â”‚               â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ CatÃ©gories   â”‚  â”‚  Historique   â”‚  â”‚ Demandes     â”‚        â”‚
â”‚  â”‚              â”‚  â”‚               â”‚  â”‚  AccÃ¨s        â”‚        â”‚
â”‚  â”‚ â€¢ id         â”‚  â”‚ â€¢ id          â”‚  â”‚ â€¢ id          â”‚        â”‚
â”‚  â”‚ â€¢ nom        â”‚  â”‚ â€¢ action      â”‚  â”‚ â€¢ utilisateur â”‚        â”‚
â”‚  â”‚              â”‚  â”‚ â€¢ table       â”‚  â”‚ â€¢ type        â”‚        â”‚
â”‚  â”‚              â”‚  â”‚ â€¢ valeurs     â”‚  â”‚ â€¢ statut      â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Flux de DonnÃ©es - Exemple : CrÃ©ation d'une Vente

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Utilis.  â”‚
â”‚ (Vendeur)â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ 1. AccÃ¨s Ã  ventes.php
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ventes.php     â”‚
â”‚  (Formulaire)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 2. SÃ©lection produits
     â”‚    + QuantitÃ©s
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Validation     â”‚
â”‚  (PHP)          â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 3. VÃ©rification stock
     â”‚    + Calcul total
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Base de DonnÃ©esâ”‚
â”‚                 â”‚
â”‚  â€¢ INSERT vente â”‚
â”‚  â€¢ INSERT       â”‚
â”‚    details_venteâ”‚
â”‚  â€¢ UPDATE stock â”‚
â”‚    (quantitÃ©)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 4. Enregistrement historique
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  historique     â”‚
â”‚  (Logging)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Confirmation   â”‚
â”‚  (Message)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Architecture des RÃ´les et Permissions

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   UTILISATEUR    â”‚
                    â”‚  (AuthentifiÃ©)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚            â”‚            â”‚
                â–¼            â–¼            â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Admin   â”‚  â”‚ Vendeur  â”‚  â”‚ Resp.    â”‚
        â”‚          â”‚  â”‚          â”‚  â”‚ Approv.  â”‚
        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
             â”‚            â”‚            â”‚
             â”‚            â”‚            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚        â”‚        â”‚   â”‚   â”‚        â”‚        â”‚
    â–¼        â–¼        â–¼   â–¼   â–¼        â–¼        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚Stock â”‚ â”‚Ventesâ”‚ â”‚Clientsâ”‚ â”‚Stock â”‚ â”‚Ventesâ”‚ â”‚Stock â”‚
â”‚CRUD  â”‚ â”‚CRUD  â”‚ â”‚CRUD   â”‚ â”‚Read  â”‚ â”‚CRUD  â”‚ â”‚CRUD  â”‚
â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚Users â”‚ â”‚Commandâ”‚ â”‚Fourn.â”‚ â”‚      â”‚ â”‚      â”‚ â”‚Commandâ”‚
â”‚CRUD  â”‚ â”‚es     â”‚ â”‚Read  â”‚ â”‚      â”‚ â”‚      â”‚ â”‚CRUD  â”‚
â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚Tres. â”‚ â”‚      â”‚ â”‚Fourn. â”‚
â”‚Read  â”‚ â”‚      â”‚ â”‚CRUD   â”‚
â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜
```

**LÃ©gende :**
- **CRUD** : Create, Read, Update, Delete (accÃ¨s complet)
- **Read** : Lecture seule

---

## Structure des Fichiers et DÃ©pendances

```
epicerie/
â”‚
â”œâ”€â”€ ğŸ“ Pages Principales
â”‚   â”œâ”€â”€ index.php â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â”œâ”€â”€ stock.php â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   â”œâ”€â”€ ventes.php â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   â”œâ”€â”€ clients.php â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   â”œâ”€â”€ fournisseurs.php â”€â”€â”€â”€â”€â”¤
â”‚   â”œâ”€â”€ categories.php â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   â”œâ”€â”€ commandes.php â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   â”œâ”€â”€ tresorerie.php â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   â”œâ”€â”€ utilisateurs.php â”€â”€â”€â”€â”€â”¤
â”‚   â””â”€â”€ demandes_acces.php â”€â”€â”€â”¤
â”‚                             â”‚
â”œâ”€â”€ ğŸ“ Authentification       â”‚
â”‚   â”œâ”€â”€ auth.php â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   â””â”€â”€ logout.php â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”œâ”€â”€ ğŸ“ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚   â”œâ”€â”€ db_conn.php â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â”œâ”€â”€ historique_helper.php â”‚
â”‚   â”œâ”€â”€ export_helper.php     â”‚
â”‚   â””â”€â”€ role_helper.php        â”‚
â”‚                             â”‚
â”œâ”€â”€ ğŸ“ Styles                 â”‚
â”‚   â”œâ”€â”€ styles_connected.css â”€â”¤
â”‚   â””â”€â”€ styles.css             â”‚
â”‚                             â”‚
â””â”€â”€ ğŸ“ Base de DonnÃ©es        â”‚
    â”œâ”€â”€ db.sql                â”‚
    â”œâ”€â”€ db_historique.sql     â”‚
    â””â”€â”€ db_demandes_acces.sql â”‚
```

**Flux de dÃ©pendances :**
- Toutes les pages â†’ `db_conn.php` (connexion)
- Pages de gestion â†’ `historique_helper.php` (logging)
- Pages avec export â†’ `export_helper.php` (CSV)
- Pages avec rÃ´les â†’ `role_helper.php` (badges)

---

## SchÃ©ma Base de DonnÃ©es - Relations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Utilisateurs â”‚         â”‚  CatÃ©gories   â”‚
â”‚              â”‚         â”‚              â”‚
â”‚ â€¢ id (PK)    â”‚         â”‚ â€¢ id (PK)    â”‚
â”‚ â€¢ nom        â”‚         â”‚ â€¢ nom        â”‚
â”‚ â€¢ email      â”‚         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â€¢ rÃ´le       â”‚                â”‚
â”‚ â€¢ mdp        â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
       â”‚                        â”‚
       â”‚                        â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
       â”‚  â”‚  Produits    â”‚      â”‚
       â”‚  â”‚              â”‚      â”‚
       â”‚  â”‚ â€¢ id (PK)    â”‚â—„â”€â”€â”€â”€â”€â”˜
       â”‚  â”‚ â€¢ nom        â”‚
       â”‚  â”‚ â€¢ id_cat (FK)â”‚
       â”‚  â”‚ â€¢ prix_achat â”‚
       â”‚  â”‚ â€¢ prix_vente â”‚
       â”‚  â”‚ â€¢ stock      â”‚
       â”‚  â”‚ â€¢ id_fourn(FK)â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚         â”‚
       â”‚         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
â”‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚  Fournisseursâ”‚   â”‚   â”‚   Clients     â”‚
â”‚  â”‚              â”‚   â”‚   â”‚              â”‚
â”‚  â”‚ â€¢ id (PK)    â”‚â—„â”€â”€â”˜   â”‚ â€¢ id (PK)    â”‚
â”‚  â”‚ â€¢ nom        â”‚       â”‚ â€¢ nom        â”‚
â”‚  â”‚ â€¢ tÃ©lÃ©phone  â”‚       â”‚ â€¢ tÃ©lÃ©phone   â”‚
â”‚  â”‚ â€¢ email      â”‚       â”‚ â€¢ email       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚         â”‚                     â”‚
â”‚         â”‚                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚   Achats     â”‚      â”‚   Ventes     â”‚
â”‚  â”‚              â”‚      â”‚              â”‚
â”‚  â”‚ â€¢ id (PK)    â”‚      â”‚ â€¢ id (PK)    â”‚
â”‚  â”‚ â€¢ date       â”‚      â”‚ â€¢ date       â”‚
â”‚  â”‚ â€¢ total      â”‚      â”‚ â€¢ total      â”‚
â”‚  â”‚ â€¢ id_fourn(FK)â”‚     â”‚ â€¢ id_client(FK)â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚         â”‚                     â”‚
â”‚         â”‚                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚Details Achat â”‚      â”‚Details Vente â”‚
â”‚  â”‚              â”‚      â”‚              â”‚
â”‚  â”‚ â€¢ id_achat(FK)â”‚     â”‚ â€¢ id_vente(FK)â”‚
â”‚  â”‚ â€¢ id_prod (FK)â”‚     â”‚ â€¢ id_prod (FK)â”‚
â”‚  â”‚ â€¢ quantitÃ©    â”‚     â”‚ â€¢ quantitÃ©    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚  Historique  â”‚      â”‚ Demandes     â”‚
â”‚  â”‚              â”‚      â”‚  AccÃ¨s        â”‚
â”‚  â”‚ â€¢ id (PK)    â”‚      â”‚ â€¢ id (PK)    â”‚
â”‚  â”‚ â€¢ id_user(FK)â”‚      â”‚ â€¢ id_user(FK)â”‚
â”‚  â”‚ â€¢ action     â”‚      â”‚ â€¢ type       â”‚
â”‚  â”‚ â€¢ table      â”‚      â”‚ â€¢ statut     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**LÃ©gende :**
- **PK** : Primary Key (ClÃ© Primaire)
- **FK** : Foreign Key (ClÃ© Ã‰trangÃ¨re)
- **â†’** : Relation (1 vers plusieurs)

---

## Flux d'Authentification

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Utilis.  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 1. AccÃ¨s auth.php
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  auth.php       â”‚
â”‚  (Formulaire)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 2. Soumission
     â”‚    email + mdp
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Validation     â”‚
â”‚  â€¢ VÃ©rif email  â”‚
â”‚  â€¢ password_    â”‚
â”‚    verify()     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 3. SuccÃ¨s
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Session PHP    â”‚
â”‚  â€¢ id_user      â”‚
â”‚  â€¢ nom          â”‚
â”‚  â€¢ rÃ´le         â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 4. Redirection
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  index.php      â”‚
â”‚  (Dashboard)    â”‚
â”‚                 â”‚
â”‚  VÃ©rification   â”‚
â”‚  session sur    â”‚
â”‚  chaque page    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Architecture de SÃ©curitÃ©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         COUCHE SÃ‰CURITÃ‰                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Protection SQL Injection         â”‚  â”‚
â”‚  â”‚ â€¢ Prepared Statements            â”‚  â”‚
â”‚  â”‚ â€¢ mysqli_prepare()               â”‚  â”‚
â”‚  â”‚ â€¢ mysqli_stmt_bind_param()       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Protection XSS                    â”‚  â”‚
â”‚  â”‚ â€¢ htmlspecialchars()              â”‚  â”‚
â”‚  â”‚ â€¢ Ã‰chappement HTML                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Authentification                 â”‚  â”‚
â”‚  â”‚ â€¢ password_hash() (bcrypt)       â”‚  â”‚
â”‚  â”‚ â€¢ password_verify()              â”‚  â”‚
â”‚  â”‚ â€¢ Sessions PHP                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ContrÃ´le d'AccÃ¨s                 â”‚  â”‚
â”‚  â”‚ â€¢ VÃ©rification session            â”‚  â”‚
â”‚  â”‚ â€¢ VÃ©rification rÃ´le               â”‚  â”‚
â”‚  â”‚ â€¢ Permissions par page            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## RÃ©sumÃ© Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ARCHITECTURE 3 TIERS                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  TIER 1 : PRÃ‰SENTATION                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â”‚
â”‚  â€¢ Pages PHP (HTML/CSS/JS)                                   â”‚
â”‚  â€¢ Interface utilisateur                                     â”‚
â”‚  â€¢ BibliothÃ¨ques (Chart.js, FPDF)                            â”‚
â”‚                                                               â”‚
â”‚  TIER 2 : LOGIQUE MÃ‰TIER                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â”‚
â”‚  â€¢ Traitement PHP                                            â”‚
â”‚  â€¢ Validation des donnÃ©es                                     â”‚
â”‚  â€¢ Helpers rÃ©utilisables                                     â”‚
â”‚  â€¢ SÃ©curitÃ© (auth, permissions)                              â”‚
â”‚                                                               â”‚
â”‚  TIER 3 : DONNÃ‰ES                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â”‚
â”‚  â€¢ Base de donnÃ©es MySQL                                     â”‚
â”‚  â€¢ 11 tables                                                 â”‚
â”‚  â€¢ Relations et intÃ©gritÃ© rÃ©fÃ©rentielle                      â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Document crÃ©Ã© pour visualiser l'architecture de Smart Stock** ğŸ—ï¸

